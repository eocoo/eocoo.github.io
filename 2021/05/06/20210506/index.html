<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>算法设计 排序 | Echo</title>
  <meta name="author" content="shanhm1991">
  
  <meta name="description" content="排序即将一组对象按照某种逻辑顺序重新排列的过程，通常，整理数据的第一步就是进行排序，在早期时代，大家普遍认为30%的计算周期都用在了排序上，如今这个比例降低了，可能的原因之一是如今的排序算法更加高效，
而并非排序的重要性降低了。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="算法设计 排序"/>
  <meta property="og:site_name" content="Echo"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Echo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-147251181-1', 'auto');
	ga('send', 'pageview');

</script>


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header id="header" class="inner"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="alignleft">
  <h1><a href="/">Echo</a></h1>
  <span style="color:#ADA5A0; height:20px;line-height:30px;">心怀热爱，不问终点，凛冬散尽，星河长明</span>
  <h2><font style="color: #999;">articles:  97 &nbsp;&nbsp;&nbsp; views: <span id="busuanzi_value_site_uv"></span></font></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/about">Abount</a></li>
    
      <li><a href="/books">Books</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>

<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-20210506" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2021-05-05T16:00:00.000Z"><a href="/2021/05/06/20210506/">2021-05-06</a></time>
      
      

  
  
    <h1 class="p-name title" itemprop="headline name">
        算法设计 排序
    </h1>
    
    
  
  
  


<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


   <font style="color: #999;"> words: 1.9k  &nbsp;&nbsp; views: <span id="busuanzi_value_page_pv"></span> &nbsp;&nbsp; time: 9min</font>
   
   
  
  <div class="categories">
    <a href="/categories/算法设计/">算法设计</a>
  </div>


   
   

   
   <hr style="background-color: #ddd; height:1px; border:none;" /><br>
   


    </header>
      
    <div class="e-content entry" itemprop="articleBody">
      
        <p>排序即将一组对象按照某种逻辑顺序重新排列的过程，通常，整理数据的第一步就是进行排序，在早期时代，大家普遍认为30%的计算周期都用在了排序上，如今这个比例降低了，可能的原因之一是如今的排序算法更加高效，
而并非排序的重要性降低了。</p>
<a id="more"></a>

<br>

<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>这里先设计一个排序工具类<code>Sorts</code>，提供对<code>List</code>进行排序的接口，同时支持对排序策略的选择，默认从小到大进行排序，另外，也可以通过设置<code>Comparator</code>进行反向排序</p>
<figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&lt;? <span class="keyword">super</span> T&gt;&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List&lt;T&gt; list, String algorithm)</span> </span>&#123;</span><br><span class="line">    doSort(list, algorithm, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&lt;? <span class="keyword">super</span> T&gt;&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List&lt;T&gt; list, String algorithm, Comparator&lt;? <span class="keyword">super</span> T&gt; comp)</span> </span>&#123;</span><br><span class="line">    doSort(list, algorithm, comp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">void</span> <span class="title">doSort</span><span class="params">(List&lt;E&gt; list, String algorithm, Comparator&lt;? <span class="keyword">super</span> E&gt; comp)</span> </span>&#123;</span><br><span class="line">    LOGGER.debug(<span class="string">"before sort: &#123;&#125;"</span>, list); </span><br><span class="line"></span><br><span class="line">    Object[] array = list.toArray();</span><br><span class="line">    <span class="keyword">switch</span>(algorithm)&#123;</span><br><span class="line">    <span class="keyword">case</span> ALGORITHM_SELECT: sort_select(array, comp); <span class="keyword">break</span>;            <span class="comment">// 冒泡排序</span></span><br><span class="line">    <span class="keyword">case</span> ALGORITHM_INSERT_SWAP: sort_insert_swap(array, comp); <span class="keyword">break</span>;  <span class="comment">// 插入排序</span></span><br><span class="line">    <span class="keyword">case</span> ALGORITHM_INSERT_MOVE: sort_insert_move(array, comp); <span class="keyword">break</span>;  <span class="comment">// 插入排序</span></span><br><span class="line">    <span class="keyword">case</span> ALGORITHM_INSERT_XIER: sort_xier(array, comp); <span class="keyword">break</span>;         <span class="comment">// 希尔排序</span></span><br><span class="line">    <span class="keyword">case</span> ALGORITHM_MERGE: sort_merge(array, comp); <span class="keyword">break</span>;              <span class="comment">// 归并排序</span></span><br><span class="line">    <span class="keyword">case</span> ALGORITHM_QUICK: sort_quick(array, comp); <span class="keyword">break</span>;              <span class="comment">// 快速排序</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ListIterator&lt;E&gt; i = list.listIterator();</span><br><span class="line">    <span class="keyword">for</span> (Object e : array) &#123;</span><br><span class="line">        i.next();</span><br><span class="line">        i.set((E) e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后内部定义两个操作，即比较<code>comp</code>和交换<code>swap</code>，通过统一的日志来比较各个排序策略的复杂度问题，即比较和交换的次数</p>
<figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">comp</span><span class="params">(Object[] array, <span class="keyword">int</span> a, <span class="keyword">int</span> b, Comparator comp)</span> </span>&#123;</span><br><span class="line">    LOGGER.debug(String.format(<span class="string">"%60s %2s comp：%2s&lt;&gt;%2s ([%2s]&lt;&gt;[%2s])"</span>, <span class="string">" "</span>, ++times_compare, array[a], array[b], a, b)); </span><br><span class="line">    <span class="keyword">return</span> (comp != <span class="keyword">null</span> &amp;&amp; comp.compare(array[a], array[b]) &gt; <span class="number">0</span>)</span><br><span class="line">            || (comp == <span class="keyword">null</span> &amp;&amp; ((Comparable)array[a]).compareTo(array[b]) &gt; <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(Object[] array, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    Object t = array[a];</span><br><span class="line">    array[a] = array[b];</span><br><span class="line">    array[b] = t;</span><br><span class="line">    LOGGER.debug(String.format(<span class="string">"%2s swap：%2s&lt;&gt;%2s ([%2s]&lt;&gt;[%2s]) = %s"</span>, ++times_swap, array[b], array[a], a, b, Arrays.toString(array))); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面构造一个<code>List[5, 2, 10, 7, 6, 3, 8, 4]</code>，然后分别对不同的排序算法进行排序分析</p>
<h3 id="1-选择排序-冒泡排序"><a href="#1-选择排序-冒泡排序" class="headerlink" title="1. 选择排序/冒泡排序"></a>1. 选择排序/冒泡排序</h3><p>选择排序是一种很容易理解和实现的简单排序<br>首先，从数组中找出最小的元素，并将它与数组的第一个元素交换位置；<br>然后，再从剩下的元素中找到最小的元素，并将它与数组的第二个元素交换位置；<br>如此往复，直到将整个数组排序；    </p>
<figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort_select</span><span class="params">(Object[] array, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; array.length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(comp(array, i, j, comp))&#123;</span><br><span class="line">                swap(array, i ,j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>选择排序的<font color="#E51508">运行时间与输入无关</font>，即对于同样的数组元素，无论以怎样初始顺序进行，其比较和交换次数是固定的。</p>
<p>因为每次交换都能排定一个元素，因此最多只需要交换N次（只是这里写的冒泡，交换次数相对更多一些，思路与选择排序是类似的）；</p>
<p>但<font color="#E51508">每次遍历寻找最小元素的操作，并不能为下一次遍历提供什么有用信息</font>，因此即便对于一个已经排序的数组，同样需要：N(N-1)/2次比较；</p>
<p><img src="/img/20210506/20210506.1.jpg" alt=""></p>
<h3 id="2-插入排序"><a href="#2-插入排序" class="headerlink" title="2. 插入排序"></a>2. 插入排序</h3><p>类似于打牌，每次将一张牌插入到其他已经有序的牌中的适当位置，但是在实现中，为了给插入的元素腾出位置，每次需要在插入之前将其余的元素都向右移动一位</p>
<figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort_insert_swap</span><span class="params">(Object[] array, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span> &amp;&amp; !comp(array, j, j - <span class="number">1</span>, comp); j--)&#123;</span><br><span class="line">            swap(array, j-<span class="number">1</span> ,j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与选择排序一样，当前索引左边的所有元素都是有序的，只是它们的最终位置还不确定，为了给更小的元素腾出位置，它们可能还会被移动，当索引到达数组最右端时，数组排序也就完成了。</p>
<p>不同的是，插入排序的<font color="#E51508">运行时间取决于输入的初始顺序</font>，比如对于长度为 N 的数组，最好情况下如果已经排序，那么只需要 N-1 次比较和 0 次交换，
而最差情况下即对逆序数组进行排序，那么同样需要N(N-1)/2次比较，以及N(N-1)/2次交换</p>
<p><img src="/img/20210506/20210506.2.jpg" alt=""></p>
<p>对于插入排序，可以通过移动操作代替交换操作来降低操作的次数，因为交换每次只能交换相邻的元素，如果用一个临时变量来记住待插入的位置，
那么通过一次move操作和一次替换操作就能将元素直接排到正确的位置，类似上面选择排序与冒泡排序也是类似的思路，记住最小值的位置然后之间一次交换。</p>
<figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort_insert_move</span><span class="params">(Object[] array, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span> &amp;&amp; comp(array, j - <span class="number">1</span>, i, comp); j--)&#123;</span><br><span class="line">            index = j - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(index != -<span class="number">1</span>)&#123;</span><br><span class="line">            move(array, index ,i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(Object[] array, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    Object t = array[b];</span><br><span class="line">    System.arraycopy(array, a, array, a + <span class="number">1</span>, b - a);</span><br><span class="line">    array[a] = t;</span><br><span class="line">    LOGGER.debug(String.format(<span class="string">"%2s move： %s([%s]-&gt;[%s]) = %s"</span>, ++times_swap, t, b, a, Arrays.toString(array)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-希尔排序"><a href="#3-希尔排序" class="headerlink" title="3. 希尔排序"></a>3. 希尔排序</h3><figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort_xier</span><span class="params">(Object[] array, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(h &lt; array.length / <span class="number">3</span>)&#123;</span><br><span class="line">        h = h * <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(h &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">        LOGGER.debug(<span class="string">"compare interval: &#123;&#125;"</span>, h); </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = h; i &lt; array.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &gt;= h &amp;&amp; comp(array, j - h, j, comp); j -= h)&#123;</span><br><span class="line">                swap(array, j-h ,j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        h = h / <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/20210506/20210506.5.jpg" alt=""></p>
<h3 id="4-归并排序"><a href="#4-归并排序" class="headerlink" title="4. 归并排序"></a>4. 归并排序</h3><figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort_merge</span><span class="params">(Object[] array, Comparator comp)</span> </span>&#123;</span><br><span class="line">    Object[] temp = array.clone();</span><br><span class="line">    recursion_mid(array, temp, <span class="number">0</span>, array.length - <span class="number">1</span>, comp);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursion_mid</span><span class="params">(Object[] array, Object[] temp, <span class="keyword">int</span> low, <span class="keyword">int</span> high, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(low &gt;= high)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> mid = (low + high) / <span class="number">2</span>;</span><br><span class="line">    LOGGER.debug(<span class="string">"mid=&#123;&#125;"</span>, mid); </span><br><span class="line"></span><br><span class="line">    recursion_mid(array, temp, low, mid, comp);</span><br><span class="line">    recursion_mid(array, temp, mid + <span class="number">1</span>, high, comp);</span><br><span class="line">    merge(array, temp, low, mid, high, comp);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Object[] array, Object[] temp, <span class="keyword">int</span> low, <span class="keyword">int</span> mid, <span class="keyword">int</span> high, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(comp(array, mid + <span class="number">1</span>, mid, comp))&#123;</span><br><span class="line">        LOGGER.debug(<span class="string">"mid=&#123;&#125; merge skipped..."</span>, mid); </span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i = low, j = mid + <span class="number">1</span>;</span><br><span class="line">    System.arraycopy(array, low, temp, low, high - low + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = low; k &lt;= high; k++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; mid)&#123;</span><br><span class="line">            array[k] = temp[j++];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j &gt; high)&#123;</span><br><span class="line">            array[k] = temp[i++];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(comp(temp, i, j, comp))&#123;</span><br><span class="line">            array[k] = temp[j++];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            array[k] = temp[i++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    LOGGER.debug(<span class="string">"mid=&#123;&#125; merge &#123;&#125;"</span>, mid, Arrays.toString(array)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/20210506/20210506.3.jpg" alt=""></p>
<h3 id="5-快速排序"><a href="#5-快速排序" class="headerlink" title="5. 快速排序"></a>5. 快速排序</h3><figure class="highlight java"><figcaption><span class="fileDir">https://github.com/shanhm1991/Echo/blob/master/src/main/java/io/github/echo/algorithms/sort/</span><span class="caption">Sorts.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort_quick</span><span class="params">(Object[] array, Comparator comp)</span> </span>&#123;</span><br><span class="line">    recursion_partition(array, <span class="number">0</span>, array.length - <span class="number">1</span>, comp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">recursion_partition</span><span class="params">(Object[] array, <span class="keyword">int</span> low, <span class="keyword">int</span> high, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(low &gt;= high)&#123;</span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> partition = partition(array, low, high, comp);</span><br><span class="line">    LOGGER.debug(<span class="string">" partition=&#123;&#125;"</span>, partition);</span><br><span class="line">    </span><br><span class="line">    recursion_partition(array, low, partition - <span class="number">1</span>, comp);</span><br><span class="line">    recursion_partition(array, partition + <span class="number">1</span>, high, comp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Object[] array, <span class="keyword">int</span> low, <span class="keyword">int</span> high, Comparator comp)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = low, j = high + <span class="number">1</span>; <span class="comment">// 左右扫描指针</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>)&#123; </span><br><span class="line">        <span class="keyword">while</span>(++i &lt; high &amp;&amp; comp(array, low, i, comp))&#123;&#125;</span><br><span class="line">        <span class="keyword">while</span>(--j &gt; low &amp;&amp; !comp(array, low, j, comp))&#123;&#125;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= j)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        swap(array, i, j);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(low != j)&#123;</span><br><span class="line">        swap(array, low, j); <span class="comment">// 将切分元素放入正确的位置 </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/20210506/20210506.4.jpg" alt=""></p>
<p><br><strong>参考：</strong></p>
<ol>
<li>《算法》</li>
</ol>

      
    </div>
	
    <footer>
      
	  
	    
	<nav id="pagination">
	  
	  
	  
		  <a class="alignright next" href="/2020/06/01/20200601/">
		    《UNIX环境高级编程》 文件
		  </a>
	  
	  <div class="clearfix"></div>
	</nav>
	
	    
        
  
  <div class="categories">
    <a href="/categories/算法设计/">算法设计</a>
  </div>


        

        
  <div class="addthis addthis_toolbox addthis_default_style ">
    
    
      <a class="addthis_button_tweet"></a>
    

    
	
    
	
    

    <a class="addthis_counter addthis_pill_style"></a>
	
  </div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>
 		        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<script src="/js/md5.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: 'd7beb7890a79c73a3e3d',
        clientSecret: '80ea1fc195ae4b80cbd65ec9f1ce68d59595af4b',
        id: md5(window.location.pathname),
        repo: 'shanhm1991.github.io',
        owner: 'shanhm1991',
        admin: 'shanhm1991'
    })
    gitalk.render('gitalk-container')
</script>                              



</div></div>
    <aside id="sidebar" class="alignright">
  


  

  

  

  
<div class="widget catlog">
<h3 class="title">Catlog</h3>
<ul class="entry_catlog">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#引言"><span class="toc-text">引言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-选择排序-冒泡排序"><span class="toc-text">1. 选择排序&#x2F;冒泡排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-插入排序"><span class="toc-text">2. 插入排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-希尔排序"><span class="toc-text">3. 希尔排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-归并排序"><span class="toc-text">4. 归并排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-快速排序"><span class="toc-text">5. 快速排序</span></a></li></ol></li></ol>
</div>




</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">

  
  
      &copy; 2021 shanhm1991 
  
  
  
  <font style="float: right">
</div>
<div class="clearfix"></div>
</footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
